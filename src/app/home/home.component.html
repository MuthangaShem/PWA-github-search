<div class="container">
  <app-search (results)="search($event)"></app-search>

  <ng-container *ngIf="dataSource.length && searchTerm.length">
    <div class="example-container mat-elevation-z8">
      <table mat-table [dataSource]="dataSource">
        <!-- Name Column -->
        <ng-container matColumnDef="name" sticky>
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let repo">{{ repo.name }}</td>
        </ng-container>

        <!-- Full Name Column -->
        <ng-container matColumnDef="full_name">
          <th mat-header-cell *matHeaderCellDef>Full Name</th>
          <td mat-cell *matCellDef="let repo">{{ repo.full_name }}</td>
        </ng-container>

        <!-- Owner Column -->
        <ng-container matColumnDef="owner">
          <th mat-header-cell *matHeaderCellDef>Owner</th>
          <td mat-cell *matCellDef="let repo">{{ repo.owner.login }}</td>
        </ng-container>

        <!-- Language Column -->
        <ng-container matColumnDef="language">
          <th mat-header-cell *matHeaderCellDef>Language</th>
          <td mat-cell *matCellDef="let repo">{{ repo.language }}</td>
        </ng-container>

        <!-- Created At Column -->
        <ng-container matColumnDef="created_at">
          <th mat-header-cell *matHeaderCellDef>Created At</th>
          <td mat-cell *matCellDef="let repo">{{ repo.created_at | date }}</td>
        </ng-container>

        <!-- updated At Column -->
        <ng-container matColumnDef="updated_at">
          <th mat-header-cell *matHeaderCellDef>Updated At</th>
          <td mat-cell *matCellDef="let repo">{{ repo.updated_at | date }}</td>
        </ng-container>

        <!-- Watchers Column -->
        <ng-container matColumnDef="watchers_count">
          <th mat-header-cell *matHeaderCellDef>Watchers</th>
          <td mat-cell *matCellDef="let repo">{{ repo.watchers_count }}</td>
        </ng-container>

        <!-- Forks Column -->
        <ng-container matColumnDef="forks_count">
          <th mat-header-cell *matHeaderCellDef>Watchers</th>
          <td mat-cell *matCellDef="let repo">{{ repo.forks_count }}</td>
        </ng-container>

        <!-- Licance Column -->
        <ng-container matColumnDef="license">
          <th mat-header-cell *matHeaderCellDef>License</th>
          <td mat-cell *matCellDef="let repo">{{ repo.license?.name }}</td>
        </ng-container>

        <!-- Link Column -->
        <ng-container matColumnDef="html_url" stickyEnd>
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let repo">
            <a [href]="repo.html_url" target="_blank" mat-menu-item>
              <mat-icon>open_in_new</mat-icon>
            </a>
          </td>
        </ng-container>

        <tr
          mat-header-row
          *matHeaderRowDef="displayedColumns; sticky: true"
        ></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>
  </ng-container>
  <!-- <ng-container *ngIf="searchTerm.length && !dataSource.length">
    <span>No results for: {{ searchTerm }}</span>
  </ng-container> -->
</div>
